<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<h1>ajax上传文件实例</h1>

    <input type="file" name="avatar" id="i1">
    <input type="button" value="ajax上传文件" id="b1">
    {% csrf_token %}


<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<script>
    $("#b1").click(function () {
        // 先生成一个FormData对象
        // 将要提交的数据 append 到FormData对象中
        var fd = new FormData();
        fd.append("csrfmiddlewaretoken", $("[name='csrfmiddlewaretoken']").val());
        fd.append("avatar", $("#i1")[0].files[0]);
        $.ajax({
            url: "/upload/",
            type: "post",
            data: fd,
            contentType: false,  // 不让jQuery去设置提交数据的类型
            processData: false,  // 不让jQuery去处理提交的数据
            success: function (res) {
                console.log(res)
            }
        })
    });
</script>

</body>
</html>